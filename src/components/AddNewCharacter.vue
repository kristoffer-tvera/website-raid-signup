<template>
  <h2 class="text-center" id="AddOrUpdateCharTitle">
    Add/update character
    <button
      class="btn btn-primary collapsed"
      type="button"
      data-toggle="collapse"
      data-target="#update-character"
      aria-expanded="false"
      aria-controls="update-character"
    >
      +
    </button>
  </h2>
  <div class="row justify-content-center collapse" id="update-character">
    <div class="col-8">
      <form @submit="addOrUpdate">
        <div class="mb-3">
          <label for="name" class="form-label">Character name</label>
          <input
            type="text"
            class="form-control"
            id="name"
            v-model="character.name"
            required="required"
          />
        </div>

        <div class="mb-3">
          <label for="ilvl" class="form-label">Ilvl</label>
          <input
            type="text"
            class="form-control"
            id="ilvl"
            v-model="character.ilvl"
            required="required"
          />
        </div>

        <div class="mb-3">
          <label for="server" class="form-label">Server</label>
          <input
            type="text"
            class="form-control"
            id="server"
            v-model="character.server"
            required="required"
            list="realms"
          />

          <datalist id="realms">
            <option value="aggramar">Aggramar</option>
            <option value="arathor">Arathor</option>
            <option value="aszune">Aszune</option>
            <option value="azjolnerub">Azjol-Nerub</option>
            <option value="bloodhoof">Bloodhoof</option>
            <option value="doomhammer">Doomhammer</option>
            <option value="draenor">Draenor</option>
            <option value="dragonblight">Dragonblight</option>
            <option value="emerald-dream">Emerald Dream</option>
            <option value="garona">Garona</option>
            <option value="voljin">Vol'jin</option>
            <option value="sunstrider">Sunstrider</option>
            <option value="arakarahm">Arak-arahm</option>
            <option value="twilights-hammer">Twilight's Hammer</option>
            <option value="zenedar">Zenedar</option>
            <option value="forscherliga">Forscherliga</option>
            <option value="medivh">Medivh</option>
            <option value="agamaggan">Agamaggan</option>
            <option value="alakir">Al'Akir</option>
            <option value="bladefist">Bladefist</option>
            <option value="bloodscalp">Bloodscalp</option>
            <option value="burning-blade">Burning Blade</option>
            <option value="burning-legion">Burning Legion</option>
            <option value="crushridge">Crushridge</option>
            <option value="daggerspine">Daggerspine</option>
            <option value="deathwing">Deathwing</option>
            <option value="dragonmaw">Dragonmaw</option>
            <option value="dunemaul">Dunemaul</option>
            <option value="dethecus">Dethecus</option>
            <option value="sinstralis">Sinstralis</option>
            <option value="durotan">Durotan</option>
            <option value="argent-dawn">Argent Dawn</option>
            <option value="kirin-tor">Kirin Tor</option>
            <option value="dalaran">Dalaran</option>
            <option value="archimonde">Archimonde</option>
            <option value="elune">Elune</option>
            <option value="illidan">Illidan</option>
            <option value="hyjal">Hyjal</option>
            <option value="kaelthas">Kael'thas</option>
            <option value="nerzhul">Ner'zhul</option>
            <option value="chogall">Cho'gall</option>
            <option value="sargeras">Sargeras</option>
            <option value="runetotem">Runetotem</option>
            <option value="shadowsong">Shadowsong</option>
            <option value="silvermoon">Silvermoon</option>
            <option value="stormrage">Stormrage</option>
            <option value="terenas">Terenas</option>
            <option value="thunderhorn">Thunderhorn</option>
            <option value="turalyon">Turalyon</option>
            <option value="ravencrest">Ravencrest</option>
            <option value="shattered-hand">Shattered Hand</option>
            <option value="skullcrusher">Skullcrusher</option>
            <option value="spinebreaker">Spinebreaker</option>
            <option value="stormreaver">Stormreaver</option>
            <option value="stormscale">Stormscale</option>
            <option value="earthen-ring">Earthen Ring</option>
            <option value="alexstrasza">Alexstrasza</option>
            <option value="alleria">Alleria</option>
            <option value="antonidas">Antonidas</option>
            <option value="baelgun">Baelgun</option>
            <option value="blackhand">Blackhand</option>
            <option value="gilneas">Gilneas</option>
            <option value="kargath">Kargath</option>
            <option value="khazgoroth">Khaz'goroth</option>
            <option value="lothar">Lothar</option>
            <option value="madmortem">Madmortem</option>
            <option value="malfurion">Malfurion</option>
            <option value="zuluhed">Zuluhed</option>
            <option value="nozdormu">Nozdormu</option>
            <option value="perenolde">Perenolde</option>
            <option value="die-silberne-hand">Die Silberne Hand</option>
            <option value="aegwynn">Aegwynn</option>
            <option value="arthas">Arthas</option>
            <option value="azshara">Azshara</option>
            <option value="blackmoore">Blackmoore</option>
            <option value="blackrock">Blackrock</option>
            <option value="destromath">Destromath</option>
            <option value="eredar">Eredar</option>
            <option value="frostmourne">Frostmourne</option>
            <option value="frostwolf">Frostwolf</option>
            <option value="gorgonnash">Gorgonnash</option>
            <option value="guldan">Gul'dan</option>
            <option value="kelthuzad">Kel'Thuzad</option>
            <option value="kiljaeden">Kil'jaeden</option>
            <option value="malganis">Mal'Ganis</option>
            <option value="mannoroth">Mannoroth</option>
            <option value="zirkel-des-cenarius">Zirkel des Cenarius</option>
            <option value="proudmoore">Proudmoore</option>
            <option value="nathrezim">Nathrezim</option>
            <option value="dun-morogh">Dun Morogh</option>
            <option value="amanthul">Aman'Thul</option>
            <option value="senjin">Sen'jin</option>
            <option value="thrall">Thrall</option>
            <option value="theradras">Theradras</option>
            <option value="genjuros">Genjuros</option>
            <option value="balnazzar">Balnazzar</option>
            <option value="anubarak">Anub'arak</option>
            <option value="wrathbringer">Wrathbringer</option>
            <option value="onyxia">Onyxia</option>
            <option value="nerathor">Nera'thor</option>
            <option value="nefarian">Nefarian</option>
            <option value="kult-der-verdammten">Kult der Verdammten</option>
            <option value="das-syndikat">Das Syndikat</option>
            <option value="terrordar">Terrordar</option>
            <option value="kragjin">Krag'jin</option>
            <option value="der-rat-von-dalaran">Der Rat von Dalaran</option>
            <option value="nordrassil">Nordrassil</option>
            <option value="hellscream">Hellscream</option>
            <option value="laughing-skull">Laughing Skull</option>
            <option value="magtheridon">Magtheridon</option>
            <option value="quelthalas">Quel'Thalas</option>
            <option value="neptulon">Neptulon</option>
            <option value="twisting-nether">Twisting Nether</option>
            <option value="ragnaros">Ragnaros</option>
            <option value="the-maelstrom">The Maelstrom</option>
            <option value="sylvanas">Sylvanas</option>
            <option value="vashj">Vashj</option>
            <option value="bloodfeather">Bloodfeather</option>
            <option value="darksorrow">Darksorrow</option>
            <option value="frostwhisper">Frostwhisper</option>
            <option value="korgall">Kor'gall</option>
            <option value="defias-brotherhood">Defias Brotherhood</option>
            <option value="the-venture-co">The Venture Co</option>
            <option value="lightnings-blade">Lightning's Blade</option>
            <option value="haomarush">Haomarush</option>
            <option value="xavius">Xavius</option>
            <option value="khaz-modan">Khaz Modan</option>
            <option value="drekthar">Drek'Thar</option>
            <option value="rashgarroth">Rashgarroth</option>
            <option value="throkferoth">Throk'Feroth</option>
            <option value="conseil-des-ombres">Conseil des Ombres</option>
            <option value="varimathras">Varimathras</option>
            <option value="hakkar">Hakkar</option>
            <option value="les-sentinelles">Les Sentinelles</option>
            <option value="khadgar">Khadgar</option>
            <option value="bronzebeard">Bronzebeard</option>
            <option value="kul-tiras">Kul Tiras</option>
            <option value="chromaggus">Chromaggus</option>
            <option value="dentarg">Dentarg</option>
            <option value="moonglade">Moonglade</option>
            <option value="la-croisade-écarlate">La Croisade écarlate</option>
            <option value="executus">Executus</option>
            <option value="trollbane">Trollbane</option>
            <option value="mazrigos">Mazrigos</option>
            <option value="talnivarr">Talnivarr</option>
            <option value="emeriss">Emeriss</option>
            <option value="drakthul">Drak'thul</option>
            <option value="ahnqiraj">Ahn'Qiraj</option>
            <option value="scarshield-legion">Scarshield Legion</option>
            <option value="ysera">Ysera</option>
            <option value="malygos">Malygos</option>
            <option value="rexxar">Rexxar</option>
            <option value="anetheron">Anetheron</option>
            <option value="nazjatar">Nazjatar</option>
            <option value="tichondrius">Tichondrius</option>
            <option value="steamwheedle-cartel">Steamwheedle Cartel</option>
            <option value="die-ewige-wacht">Die ewige Wacht</option>
            <option value="die-todeskrallen">Die Todeskrallen</option>
            <option value="die-arguswacht">Die Arguswacht</option>
            <option value="uldaman">Uldaman</option>
            <option value="eitrigg">Eitrigg</option>
            <option value="confrérie-du-thorium">Confrérie du Thorium</option>
            <option value="veknilash">Vek'nilash</option>
            <option value="boulderfist">Boulderfist</option>
            <option value="frostmane">Frostmane</option>
            <option value="outland">Outland</option>
            <option value="grim-batol">Grim Batol</option>
            <option value="jaedenar">Jaedenar</option>
            <option value="kazzak">Kazzak</option>
            <option value="tarren-mill">Tarren Mill</option>
            <option value="chamber-of-aspects">Chamber of Aspects</option>
            <option value="ravenholdt">Ravenholdt</option>
            <option value="pozzo-delleternità">Pozzo dell'Eternità</option>
            <option value="eonar">Eonar</option>
            <option value="kilrogg">Kilrogg</option>
            <option value="aerie-peak">Aerie Peak</option>
            <option value="wildhammer">Wildhammer</option>
            <option value="saurfang">Saurfang</option>
            <option value="nemesis">Nemesis</option>
            <option value="darkmoon-faire">Darkmoon Faire</option>
            <option value="veklor">Vek'lor</option>
            <option value="mugthol">Mug'thol</option>
            <option value="taerar">Taerar</option>
            <option value="dalvengyr">Dalvengyr</option>
            <option value="rajaxx">Rajaxx</option>
            <option value="ulduar">Ulduar</option>
            <option value="malorne">Malorne</option>
            <option value="der-abyssische-rat">Der abyssische Rat</option>
            <option value="der-mithrilorden">Der Mithrilorden</option>
            <option value="tirion">Tirion</option>
            <option value="ambossar">Ambossar</option>
            <option value="suramar">Suramar</option>
            <option value="krasus">Krasus</option>
            <option value="die-nachtwache">Die Nachtwache</option>
            <option value="arathi">Arathi</option>
            <option value="ysondre">Ysondre</option>
            <option value="eldrethalas">Eldre'Thalas</option>
            <option value="culte-de-la-rive-noire">Culte de la Rive noire</option>
            <option value="dun-modr">Dun Modr</option>
            <option value="zuljin">Zul'jin</option>
            <option value="uldum">Uldum</option>
            <option value="cthun">C'Thun</option>
            <option value="sanguino">Sanguino</option>
            <option value="shendralar">Shen'dralar</option>
            <option value="tyrande">Tyrande</option>
            <option value="exodar">Exodar</option>
            <option value="minahonda">Minahonda</option>
            <option value="los-errantes">Los Errantes</option>
            <option value="lightbringer">Lightbringer</option>
            <option value="darkspear">Darkspear</option>
            <option value="alonsus">Alonsus</option>
            <option value="burning-steppes">Burning Steppes</option>
            <option value="bronze-dragonflight">Bronze Dragonflight</option>
            <option value="anachronos">Anachronos</option>
            <option value="colinas-pardas">Colinas Pardas</option>
            <option value="ungoro">Un'Goro</option>
            <option value="garrosh">Garrosh</option>
            <option value="area-52">Area 52</option>
            <option value="todeswache">Todeswache</option>
            <option value="arygos">Arygos</option>
            <option value="teldrassil">Teldrassil</option>
            <option value="norgannon">Norgannon</option>
            <option value="lordaeron">Lordaeron</option>
            <option value="aggra-português">Aggra (Português)</option>
            <option value="terokkar">Terokkar</option>
            <option value="blades-edge">Blade's Edge</option>
            <option value="azuremyst">Azuremyst</option>
            <option value="hellfire">Hellfire</option>
            <option value="ghostlands">Ghostlands</option>
            <option value="nagrand">Nagrand</option>
            <option value="the-shatar">The Sha'tar</option>
            <option value="karazhan">Karazhan</option>
            <option value="auchindoun">Auchindoun</option>
            <option value="shattered-halls">Shattered Halls</option>
            <option value="gordunni">Gordunni</option>
            <option value="lich-king">Lich King</option>
            <option value="soulflayer">Soulflayer</option>
            <option value="deathguard">Deathguard</option>
            <option value="sporeggar">Sporeggar</option>
            <option value="nethersturm">Nethersturm</option>
            <option value="shattrath">Shattrath</option>
            <option value="deepholm">Deepholm</option>
            <option value="greymane">Greymane</option>
            <option value="festung-der-stürme">Festung der Stürme</option>
            <option value="echsenkessel">Echsenkessel</option>
            <option value="blutkessel">Blutkessel</option>
            <option value="galakrond">Galakrond</option>
            <option value="howling-fjord">Howling Fjord</option>
            <option value="razuvious">Razuvious</option>
            <option value="deathweaver">Deathweaver</option>
            <option value="die-aldor">Die Aldor</option>
            <option value="das-konsortium">Das Konsortium</option>
            <option value="chants-éternels">Chants éternels</option>
            <option value="marécage-de-zangar">Marécage de Zangar</option>
            <option value="temple-noir">Temple noir</option>
            <option value="fordragon">Fordragon</option>
            <option value="naxxramas">Naxxramas</option>
            <option value="borean-tundra">Borean Tundra</option>
            <option value="les-clairvoyants">Les Clairvoyants</option>
            <option value="azuregos">Azuregos</option>
            <option value="ashenvale">Ashenvale</option>
            <option value="booty-bay">Booty Bay</option>
            <option value="eversong">Eversong</option>
            <option value="thermaplugg">Thermaplugg</option>
            <option value="grom">Grom</option>
            <option value="goldrinn">Goldrinn</option>
            <option value="blackscar">Blackscar</option>
        </datalist>
        </div>

        <div class="mb-3">
          <label for="class" class="form-label">Select class</label>
          <select
            id="class"
            class="form-select"
            aria-label="Default select example"
            v-model="character.className"
            required="required"
          >
            <option value="1">Warrior</option>
            <option value="2">Paladin</option>
            <option value="3">Hunter</option>
            <option value="4">Rogue</option>
            <option value="5">Priest</option>
            <option value="6">Death Knight	</option>
            <option value="7">Shaman</option>
            <option value="8">Mage</option>
            <option value="9">Warlock</option>
            <option value="10">Monk</option>
            <option value="11">Druid</option>
            <option value="12">Demon Hunter</option>
          </select>
        </div>

        <div class="form-check form-switch">
          <input
            class="form-check-input"
            type="checkbox"
            id="role_tank"
            v-model="character.tank"
          />
          <label class="form-check-label" for="role_tank">Tank</label>
        </div>

        <div class="form-check form-switch">
          <input
            class="form-check-input"
            type="checkbox"
            id="role_healer"
            v-model="character.healer"
          />
          <label class="form-check-label" for="role_healer">Healer</label>
        </div>

        <div class="mb-3">
          <div class="form-check form-switch">
            <input
              class="form-check-input"
              type="checkbox"
              id="role_dps"
              v-model="character.dps"
            />
            <label class="form-check-label" for="role_dps">Dps</label>
          </div>
        </div>
        <button type="submit" class="btn btn-primary">Save</button>
      </form>
    </div>
  </div>
</template>

<script>
export default {
  name: "AddNewCharacter",
  props: ['characterToUpdate'],
  components: {},
  data() {
    return {
      character: this.characterToUpdate,
    };
  },
  watch: {
    characterToUpdate: function(){
      this.character = this.characterToUpdate;
    }
  },
  methods: {
    addOrUpdate(e) {
      this.$emit("save-character", {
        id: this.character.id,
        name: this.character.name,
        server: this.character.server,
        className: Number.parseInt(this.character.className),
        ilvl: this.character.ilvl,
        tank: this.character.tank,
        healer: this.character.healer,
        dps: this.character.dps,
        saved: this.character.saved,
      });

      this.character.id = Math.floor(Math.random() * 133769);
      this.character.name = "";
      this.character.server = "";
      this.character.className = 0;
      this.character.ilvl = 0;
      this.character.tank = false;
      this.character.healer = false;
      this.character.dps = false;
      this.character.saved = false;

      let myCollapser = document.querySelector(
        '[data-target="#update-character"]'
      );
      myCollapser.click();

      e.preventDefault();
      return false;
    },
  },
  emits: ['save-character']
};
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>
h3 {
  margin: 40px 0 0;
}

ul {
  list-style-type: none;
  padding: 0;
}

li {
  display: inline-block;
  margin: 0 10px;
}

a {
  color: #42b983;
}
</style>